<style>
.W {display:block;}
.W .Wrap{
	width:490px;position:absolute;background-color:white;border:1px solid #ccc; text-align:left;
	margin:auto;
}
.W .Wrap:after{content:' ';position:absolute;display:block;left:-5px;top:-5px;z-index:-1;width:100%;height:100%;border:5px solid transparent;border-color:rgba(51, 51, 51, 0.1);border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;}

.W .Title{cursor:move;overflow:hidden;}
.W .MainTit{
	padding:0 15px;height:35px;line-height:37px;overflow:hidden;font-size:14px;font-weight:bold;color:#000;
	border-bottom:1px solid #C8DDE9;background:#E7F2F9;
	background:-webkit-gradient(linear,0 0,0 100%,from(#F3F8FC),to(#E7F2F9));
	background:-moz-linear-gradient(top,#F3F8FC,#E7F2F9);
	filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0,startColorStr=#FFF3F8FC,endColorStr=#FFE7F2F9);
}
.W .Close{width:16px;height:16px;position:absolute;top:10px;right:10px;background:url(close_div.gif) no-repeat;}
.W .Close:hover{background:url(close_div.gif) no-repeat right top;}

.W .Cont{padding:0 15px 5px;}
.W .Note{margin:12px 0;line-height:22px;color:#999;word-break:break-all;}
.W .Note strong{font-family:Verdana;padding:0 2px;font-weight:200;color:#09F;}
.W .btnBox{text-align:right;padding:10px 0;}
.W .flashWrap{position:relative;}
.W .flashWrap span{position:absolute;top:9px;*top:5px;left:140px;color:#999;}
.W .flashWrap span a{color:#09F;text-decoration:none;}
.W .flashWrap span i{font-style:normal;padding:0 9px;font-family:Verdana;color:#ccc;}
.W .flashWrap span input{vertical-align:middle;margin-right:5px;}
.W .flashWrap span label{vertical-align:middle;}
.W .fileWarp{width:460px;min-height:240px;padding-top:10px;_height:auto!important;_height:240px;}
.W .fileWarp fieldset{min-height:214px;padding:0 12px 8px;border:1px solid #c8dde9;_height:auto!important;_height:214px;}
.W .fileWarp legend{color:#9ec1d5;padding:3px 8px;font-weight:bold;}

.W .fileWarp ul{padding-top:8px;}
.W .fileWarp ul li.img{width:100px;padding:0 4px;float:left;}
.W .fileWarp ul li.img a{color:#09F;line-height:20px;*line-height:22px;}
.W .fileWarp ul li.file{border-bottom:1px dashed #ccc;font:12px Verdana;padding:10px;width:412px;}
.W .fileWarp ul li.file a{float:right;width:16px;height:16px;background:url(cancel.png) no-repeat;font-size:0;text-indent:999px;overflow:hidden;}

.W .btn{width:72px;height:24px;background:url(btn.gif) no-repeat;font-size:14px;border:0;cursor:pointer;}
.W #fileQueue{clear:both;}

.W .uploadify-queue-item{background-color:#F5F5F5;border:1px solid #E5E5E5; font:12px Verdana, Geneva, sans-serif;padding:10px;width:412px;margin-bottom:5px;}
.W .uploadify-queue-item .cancel a{float:right;display:block;width:16px;height:16px;background:url('uploadify-cancel.png') 0 0 no-repeat;overflow:hidden;text-indent:-9999px;}
.W .uploadify-queue-item .completed{background-color:#E5E5E5;}
.W .uploadify-progress{background-color:#E5E5E5;margin-top:10px;width:100%;}
.W .uploadify-progress-bar{background-color:#0099FF;height:3px;width:1px;}
.W .uploadify-error{background-color:#FDE5DD !important;border:1px solid #FBCBBC !important;}
</style>
<script type="text/javascript" src="__PUBLIC__/js/ajaxfileupload.js"></script>
<div class="W" id="image_dialog">
	<div class="Wrap" id="Wrap">
		<div class="Title">
			<h3 class="MainTit" id="MainTit">上传图片</h3>
			<a href="javascript:Close();" title="关闭" class="Close"></a>
		</div>
		<div class="Cont">
			<p class="Note">最多上传<strong>4</strong>个附件,单文件最大<strong>200k</strong>,类型<strong>jpg</strong></p>
			<div class="flashWrap">
				<input name="uploadify" id="uploadify" type="file" multiple="true" onchange=""/>
				<!-- <span><input type="checkbox" name="iswatermark" id="iswatermark" /><label>是否添加水印</label></span>-->
			</div>
			<div class="fileWarp">
				<fieldset>
					<legend>列表</legend>
					<ul>
					</ul>
					<div id="fileQueue">
					</div>
				</fieldset>
			</div>
			<div class="btnBox">
				<button class="btn" id="SaveBtn">保存</button>
				&nbsp;
				<button class="btn" id="CancelBtn">取消</button>
			</div>
		</div>
	</div>
</div>
<script>
function image_dialog(html,title,backfun){
    layer.open({
	    type:1,
	    skin: 'layui-layer-demo', //样式类名
	    closeBtn: 1, //不显示关闭按钮
	    title:false,
	    shift: 1,
	    shadeClose: false, //开启遮罩关闭
	    area:['490px','auto'],
	    shade:'#fff',
	    content:$("#image_dialog"),
        cancel :close
	});
}

function SetImgContent(data){	
	var obj=eval('('+data+')');
	if(obj.state == 'SUCCESS'){
		var sLi = "";
		sLi += '<li class="img">';
		sLi += '<img src="' + obj.url + '" width="100" height="100" onerror="this.src=\'__ROOT__/Public/plugins/uploadify/nopic.png\'">';
		sLi += '<input type="hidden" name="fileurl_tmp[]" value="' + obj.url + '">';
		sLi += '<a href="javascript:void(0);">删除</a>';
		sLi += '</li>';
		return sLi;
	}else{
		//window.parent.message(obj.text,8,2);
		alert(obj.text);
		return;
	}
}

</script>