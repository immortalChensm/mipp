<include file="Public/min-header" />
<div class="wrapper">
    <include file="Public/breadcrumb"/>
	<section class="content">
       <div class="row">
       		<div class="col-xs-12">
	       		<div class="box">
	             <div class="box-header">
	             	<!-- 导航菜单 -->
					<include file="Teacher/nav" act_nav="teacher_type"/>
	               	<nav class="navbar navbar-default">	     
				        <div class="collapse navbar-collapse">
				          <form class="navbar-form form-inline" action="{:U('Teacher/teacher_type')}" method="get">
				            <div class="form-group">
				              	<input type="text" name="keywords" class="form-control" placeholder="教师类型名称" value="{:I('keywords')}">
				            </div>
				            <button type="submit" class="btn btn-default">提交</button>
				            <div class="form-group pull-right">
					            <a href="javascript:void(0)" onclick="edit_teacher_type()" class="btn btn-primary pull-right"><i class="fa fa-plus"></i>添加教师类型</a>
				            </div>		          
				          </form>
				      	</div>
	    			</nav>
	             </div>
	             <div class="box-body">          
	           		<div class="row">
	            	<div class="col-sm-12">
		              <table id="list-table" class="table table-bordered table-striped dataTable">
		                 <thead>
		                   <tr role="row">
			                   <th width="15%">ID</th>
			                   <th width="15%">排序</th>
			                   <th width="25%">类型名称</th>
			                   <th width="25%">添加时间</th>
			                   <th width="20%">操作</th>
		                   </tr>
		                 </thead>
						<tbody>
						  <foreach name="list" item="vo" key="k" >
						  	<tr role="row" align="center">
		                     <td>{$vo.id}</td>
		                     <td>
		                     	<input name="info[sort_index]" type="text" value="{$vo.sort_index}" onblur="change_sort('{$vo.id}',this.value)"/>
		                     </td>
                             <td>{$vo.name}</td>
                             <td>{:substr($vo['create_date'],0,10)}</td>
		                     <td>
			                     <a title="编辑" class="btn btn-primary" href="javascript:void(0)" onclick="edit_teacher_type('{$vo.id}')"><i class="fa fa-pencil"></i></a>
			                     <a title="删除" class="btn btn-danger" href="javascript:void(0)" data-id="{$vo.id}" onclick="dele_teacher_type('{$vo.id}')"><i class="fa fa-trash-o"></i></a>
							 </td>
		                   </tr>
		                  </foreach>
		                   </tbody>
		                 <tfoot>                 
		                 </tfoot>
		               </table>
                       <if condition="$list eq null">
                           <include file="Public/none" />
                       </if>
	               </div>
	          </div>
              <div class="row">
              	    <div class="col-sm-6 text-left"></div>
                    <div class="col-sm-6 text-right">{$page}</div>		
              </div>
	         </div>
	        </div>
       	</div>
       </div>
   </section>
</div>
<include file="Public/dialog"/>
<script>
function change_sort(id,sort_index){
	$.post("{:U('Teacher/edit_teacher_type')}",{info:{id:id,sort_index:$.trim(sort_index)},act:'save'},function(res){
		if(res.status == '1') location.reload();
	});
}
function edit_teacher_type(id){
	$.post("{:U('Teacher/edit_teacher_type')}",{act:'show',id:id},function(data){
		dialog(data,'',function(){
			$.post("{:U('Teacher/edit_teacher_type')}",$('#dataForm').serializeArray(),function(res){
				if(res.status == '1'){
					jsalert(res.info,1,function(){
						location.reload();
					});
				}else{
					jsalert(res.info,2);
				}
			});
		})
	});
}

function dele_teacher_type(id){
	jsconfirm('确认要删除吗？',function(){
		$.ajax({
			type : 'post',
			url : '{:U("Teacher/dele_teacher_type")}',
			data : {id:id},
			dataType : 'json',
			success : function(data){
				if(data.status == '1'){
					jsalert(data.info,1,function(){
						location.reload();
					});
				}else{
					jsalert(data.info,2);
				}
			}
		})
	});
	return false;
}

</script> 
</body>
</html>